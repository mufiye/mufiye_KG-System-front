<!DOCTYPE html>
<html style="width:100%;height:100%">
<head>
    <title>graph</title>
    <meta charset="utf-8">
</head>
<body style="width:100%;height:100%">
<script type="text/javascript" src="echarts.js"></script>
<div id="main" style="width: 100%;height: 100%"></div>
<script type="text/javascript">

    var categories = [{name:"电梯型号"},{name:"故障名称"}];

    var dom = document.getElementById('main');
    var myChart = echarts.init(dom);
    var data = [
            {
                "id": 331,
                "type": "故障名称",
                "properties": {
                    "名称ID": "1",
                    "故障名称": "拽引力不足",
                    "故障次数": "3"
                },
                "category": "故障名称"
            },
            {
                "id": 374,
                "type": "故障名称",
                "properties": {
                    "名称ID": "3",
                    "故障名称": "制动失效"
                },
                "category": "故障名称"
            },
            {
                "id": 375,
                "type": "故障名称",
                "properties": {
                    "名称ID": "4",
                    "故障名称": "无法制动"
                },
                "category": "故障名称"
            },
            {
                "id": 376,
                "type": "故障名称",
                "properties": {
                    "名称ID": "5",
                    "故障名称": "安全保护装置失效"
                },
                "category": "故障名称"
            },
            {
                "id": 377,
                "type": "故障名称",
                "properties": {
                    "名称ID": "6",
                    "故障名称": "平衡系数不合要求"
                },
                "category": "故障名称"
            },
            {
                "id": 395,
                "type": "故障名称",
                "properties": {
                    "名称ID": "2",
                    "故障名称": "制动力不足",
                    "故障属性4": "",
                    "故障次数": "3"
                },
                "category": "故障名称"
            }
        ,
            {
                "id": 413,
                "type": "故障原因",
                "properties": {
                    "原因ID": "1",
                    "原因名称": "电器控件失效"
                },
                "category": "电梯型号"
            },
            {
                "id": 414,
                "type": "故障原因",
                "properties": {
                    "原因ID": "2",
                    "原因名称": "机械卡阻"
                },
                "category": "电梯型号"
            },
            {
                "id": 415,
                "type": "故障原因",
                "properties": {
                    "原因ID": "3",
                    "原因名称": "制动轮有磨损"
                },
                "category": "电梯型号"
            },
            {
                "id": 416,
                "type": "故障原因",
                "properties": {
                    "原因ID": "4",
                    "原因名称": "闸瓦表面油污"
                },
                "category": "电梯型号"
            },
            {
                "id": 417,
                "type": "故障原因",
                "properties": {
                    "原因ID": "5",
                    "原因名称": "闸瓦磨损"
                },
                "category": "电梯型号"
            },
            {
                "id": 418,
                "type": "故障原因",
                "properties": {
                    "原因ID": "6",
                    "原因名称": "制动弹簧过松"
                },
                "category": "电梯型号"
            },
            {
                "id": 419,
                "type": "故障原因",
                "properties": {
                    "原因ID": "7",
                    "原因名称": "钢丝绳磨损"
                },
                "category": "电梯型号"
            },
            {
                "id": 420,
                "type": "故障原因",
                "properties": {
                    "原因ID": "8",
                    "原因名称": "钢丝绳油污"
                },
                "category": "电梯型号",
                itemStyle:{
                    color: "#28ff00",
                }
            },
            {
                "id": 421,
                "type": "故障原因",
                "properties": {
                    "原因ID": "9",
                    "原因名称": "曳引轮磨损"
                },
                "category": "电梯型号"
            },
            {
                "id": 422,
                "type": "故障原因",
                "properties": {
                    "原因ID": "10",
                    "原因名称": "门锁联锁装置失效"
                },
                "category": "电梯型号"
            },
            {
                "id": 423,
                "type": "故障原因",
                "properties": {
                    "原因ID": "11",
                    "原因名称": "轿厢侧重量改变"
                },
                "category": "电梯型号"
            },
            {
                "id": 424,
                "type": "故障原因",
                "properties": {
                    "原因ID": "12",
                    "原因名称": "对重侧重量改变"
                },
                "category": "电梯型号"
            }
        ]
    var option = {
        tooltip: {},
        animationDuration: 1000,
        animationEasingUpdate: 'quinticInOut',
        series: [{
            type: 'graph',
            layout: 'force',
            force: {
                repulsion: 500,
                gravity: 0.1,
                edgeLength: 200,
                layoutAnimation: true,
            },
            roam: true,
            edgeSymbol: ['circle', 'arrow'],
            edgeLabel: {
                normal: {
                    show: true,
                    textStyle: {
                        fontSize: 14
                    },
                    formatter: function (params) {
                        return params.data.name
                    },
                }
            },
            data: data,
            links: data.links,
            categories: categories,
            label: {
                normal: {
                    show: true,
                    position: 'inside',
                    formatter: function (params) {
                        return params.data.name
                    },
                    fontSize: 16,
                    fontStyle: '500',
                }
            },
            lineStyle: {
                normal: {
                    width: 1,
                    type: "solid"
                }
            }
        }
        ]
    };
    myChart.setOption(option);

    setTimeout(()=>{
        option.legend = [{
            data: categories.map(function (a) {
                return a.name;
            })
        }];
        myChart.setOption(option)
    },2000)
</script>
</body>
</html>
